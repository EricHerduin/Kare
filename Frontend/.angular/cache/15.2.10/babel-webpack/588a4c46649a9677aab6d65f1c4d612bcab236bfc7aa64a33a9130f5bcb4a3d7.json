{"ast":null,"code":"import { map } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/diet-book.service\";\nimport * as i3 from \"src/app/services/meal.service\";\nimport * as i4 from \"@angular/common\";\nfunction MealListComponent_p_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"liste des meals :\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MealListComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"p\", 6);\n    i0.ɵɵlistener(\"click\", function MealListComponent_div_2_Template_p_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const mealId_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.onViewMealForm(mealId_r3));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const mealId_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(mealId_r3);\n  }\n}\nfunction MealListComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const meal_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(meal_r6.typeMeal);\n  }\n}\nexport class MealListComponent {\n  constructor(router, dietBook, dietMealService, route) {\n    this.router = router;\n    this.dietBook = dietBook;\n    this.dietMealService = dietMealService;\n    this.route = route;\n    this.dietBookId = this.route.snapshot.params[\"id\"];\n  }\n  ngOnInit() {\n    this.viewTitle = true;\n    this.route.queryParams.subscribe(params => {\n      this.dietId = params[\"dietId\"];\n      this.dietBook.getDietBookById(this.dietId).subscribe(dietbook => {\n        if (dietbook.meal?.length === 0) {\n          this.viewTitle = false;\n        }\n        if (dietbook.meal) {\n          this.mealIds = dietbook.meal.map(m => m);\n        }\n      });\n    });\n    this.dietMealService.getAllMeat().pipe(map(meals => meals.filter(meal => this.mealIds.includes(meal.id)))).subscribe(filteredMeals => {\n      this.meals = filteredMeals;\n    });\n  }\n  onViewMealForm(id) {\n    this.router.navigateByUrl(`dietbook?dietId=${this.dietId}&mealId=${id}`);\n  }\n  onViewTypeMeal(stage) {\n    this.meals.map(mealsFilterbyStage => mealsFilterbyStage.stage.includes(stage));\n  }\n  static #_ = this.ɵfac = function MealListComponent_Factory(t) {\n    return new (t || MealListComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.DietBooksService), i0.ɵɵdirectiveInject(i3.mealService), i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MealListComponent,\n    selectors: [[\"app-meal-list\"]],\n    decls: 5,\n    vars: 3,\n    consts: [[4, \"ngIf\"], [1, \"container_mealList\"], [\"class\", \"mealList_card\", 4, \"ngFor\", \"ngForOf\"], [1, \"container_meal\"], [\"class\", \"mealCard\", 4, \"ngFor\", \"ngForOf\"], [1, \"mealList_card\"], [1, \"mealId\", 3, \"click\"], [1, \"mealCard\"]],\n    template: function MealListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, MealListComponent_p_0_Template, 2, 0, \"p\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtemplate(2, MealListComponent_div_2_Template, 3, 1, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵtemplate(4, MealListComponent_div_4_Template, 3, 1, \"div\", 4);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.viewTitle);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.mealIds);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.meals);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf],\n    styles: [\".mealId[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n}\\n\\n.container_mealList[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-flow: row;\\n  justify-content: space-between;\\n}\\n\\n.mealList_card[_ngcontent-%COMP%]   .mealId[_ngcontent-%COMP%] {\\n  width: 30px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbGl2cmV0cy9kaWV0L21lYWwtbGlzdC9tZWFsLWxpc3QuY29tcG9uZW50LnNjc3MiLCJ3ZWJwYWNrOi8vLi8uLi8uLi8uLi9TaXRlJTIwV2ViL0JEMiUyMEtvbmVjdC9Gcm9udGVuZC9zcmMvYXBwL2xpdnJldHMvZGlldC9tZWFsLWxpc3QvbWVhbC1saXN0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZUFBQTtBQ0NGOztBREVBO0VBQ0UsYUFBQTtFQUNBLGNBQUE7RUFDQSw4QkFBQTtBQ0NGOztBRENBO0VBQ0UsV0FBQTtBQ0VGIiwic291cmNlc0NvbnRlbnQiOlsiLm1lYWxJZCB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbn1cblxuLmNvbnRhaW5lcl9tZWFsTGlzdCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZmxvdzogcm93O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG59XG4ubWVhbExpc3RfY2FyZCAubWVhbElkIHtcbiAgd2lkdGggOiAzMHB4O1xufSIsIi5tZWFsSWQge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59XG5cbi5jb250YWluZXJfbWVhbExpc3Qge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWZsb3c6IHJvdztcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xufVxuXG4ubWVhbExpc3RfY2FyZCAubWVhbElkIHtcbiAgd2lkdGg6IDMwcHg7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"AAKA,SAAuCA,GAAG,QAAa,MAAM;;;;;;;;ICL7DC,yBAAqB;IAAAA,iCAAiB;IAAAA,iBAAI;;;;;;IAExCA,8BAA0D;IACtCA;MAAA;MAAA;MAAA;MAAA,OAASA,+CAAsB;IAAA,EAAC;IAACA,YAAU;IAAAA,iBAAI;;;;IAAdA,eAAU;IAAVA,+BAAU;;;;;IAG7DA,8BAAiD;IAC5CA,YAAiB;IAAAA,iBAAI;;;;IAArBA,eAAiB;IAAjBA,sCAAiB;;;ADM1B,OAAM,MAAOC,iBAAiB;EAS5BC,YACUC,MAAc,EACdC,QAA0B,EAC1BC,eAA4B,EAC5BC,KAAqB;IAHrB,WAAM,GAANH,MAAM;IACN,aAAQ,GAARC,QAAQ;IACR,oBAAe,GAAfC,eAAe;IACf,UAAK,GAALC,KAAK;IAEf,eAAU,GAAG,IAAI,CAACA,KAAK,CAACC,QAAQ,CAACC,MAAM,CAAC,IAAI,CAAC;EAD1C;EAEHC,QAAQ;IACN,IAAI,CAACC,SAAS,GAAG,IAAI;IACrB,IAAI,CAACJ,KAAK,CAACK,WAAW,CAACC,SAAS,CAAEJ,MAAM,IAAI;MAC1C,IAAI,CAACK,MAAM,GAAGL,MAAM,CAAC,QAAQ,CAAC;MAC9B,IAAI,CAACJ,QAAQ,CAACU,eAAe,CAAC,IAAI,CAACD,MAAM,CAAC,CAACD,SAAS,CAAEG,QAAQ,IAAI;QAChE,IAAIA,QAAQ,CAACC,IAAI,EAAEC,MAAM,KAAK,CAAC,EAAE;UAC/B,IAAI,CAACP,SAAS,GAAG,KAAK;;QAExB,IAAIK,QAAQ,CAACC,IAAI,EAAE;UACjB,IAAI,CAACE,OAAO,GAAGH,QAAQ,CAACC,IAAI,CAACjB,GAAG,CAAEoB,CAAC,IAAKA,CAAC,CAAC;;MAE9C,CAAC,CAAC;IACJ,CAAC,CAAC;IACF,IAAI,CAACd,eAAe,CACjBe,UAAU,EAAE,CACZC,IAAI,CACHtB,GAAG,CAAEuB,KAAK,IAAKA,KAAK,CAACC,MAAM,CAAEP,IAAI,IAAK,IAAI,CAACE,OAAO,CAACM,QAAQ,CAACR,IAAI,CAACS,EAAE,CAAC,CAAC,CAAC,CACvE,CACAb,SAAS,CAAEc,aAAa,IAAI;MAC3B,IAAI,CAACJ,KAAK,GAAGI,aAAa;IAC5B,CAAC,CAAC;EACN;EACAC,cAAc,CAACF,EAAU;IACvB,IAAI,CAACtB,MAAM,CAACyB,aAAa,CAAC,mBAAmB,IAAI,CAACf,MAAM,WAAWY,EAAE,EAAE,CAAC;EAC1E;EACAI,cAAc,CAACC,KAAa;IAC1B,IAAI,CAACR,KAAK,CAACvB,GAAG,CAAEgC,kBAAkB,IAChCA,kBAAkB,CAACD,KAAK,CAACN,QAAQ,CAACM,KAAK,CAAC,CACzC;EACH;EAAC;qBA7CU7B,iBAAiB;EAAA;EAAA;UAAjBA,iBAAiB;IAAA+B;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCb9BpC,8DAA0C;QAC1CA,8BAAgC;QAC9BA,kEAEM;QACNA,8BAA4B;QAC1BA,kEAEM;QACRA,iBAAM;;;QATJA,oCAAe;QAE6BA,eAAU;QAAVA,qCAAU;QAIfA,eAAQ;QAARA,mCAAQ","names":["map","i0","MealListComponent","constructor","router","dietBook","dietMealService","route","snapshot","params","ngOnInit","viewTitle","queryParams","subscribe","dietId","getDietBookById","dietbook","meal","length","mealIds","m","getAllMeat","pipe","meals","filter","includes","id","filteredMeals","onViewMealForm","navigateByUrl","onViewTypeMeal","stage","mealsFilterbyStage","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/ericherduin/Htag/Site Web/BD2 Konect/Frontend/src/app/livrets/diet/meal-list/meal-list.component.ts","/Users/ericherduin/Htag/Site Web/BD2 Konect/Frontend/src/app/livrets/diet/meal-list/meal-list.component.html"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { DietBooksService } from \"src/app/services/diet-book.service\";\nimport { DietBook } from \"src/app/models/diet.model\";\nimport { Meal } from \"../../../models/meal.model\";\nimport { EMPTY, Observable, switchMap, map, tap } from \"rxjs\";\nimport { mealService } from \"src/app/services/meal.service\";\n\n@Component({\n  selector: \"app-meal-list\",\n  templateUrl: \"./meal-list.component.html\",\n  styleUrls: [\"./meal-list.component.scss\"],\n})\nexport class MealListComponent implements OnInit {\n  dietBook$!: Observable<DietBook>;\n  loading!: boolean;\n  viewTitle!: boolean;\n  errorMsg!: string;\n  public dietId!: string;\n  public mealIds!: Array<string>;\n  meals!: Meal[];\n  typeMeals!: Meal[];\n  constructor(\n    private router: Router,\n    private dietBook: DietBooksService,\n    private dietMealService: mealService,\n    private route: ActivatedRoute\n  ) {}\n  dietBookId = this.route.snapshot.params[\"id\"];\n  ngOnInit(): void {\n    this.viewTitle = true;\n    this.route.queryParams.subscribe((params) => {\n      this.dietId = params[\"dietId\"];\n      this.dietBook.getDietBookById(this.dietId).subscribe((dietbook) => {\n        if (dietbook.meal?.length === 0) {\n          this.viewTitle = false;\n        }\n        if (dietbook.meal) {\n          this.mealIds = dietbook.meal.map((m) => m);\n        }\n      });\n    });\n    this.dietMealService\n      .getAllMeat()\n      .pipe(\n        map((meals) => meals.filter((meal) => this.mealIds.includes(meal.id)))\n      )\n      .subscribe((filteredMeals) => {\n        this.meals = filteredMeals;\n      });\n  }\n  onViewMealForm(id: string) {\n    this.router.navigateByUrl(`dietbook?dietId=${this.dietId}&mealId=${id}`);\n  }\n  onViewTypeMeal(stage: number) {\n    this.meals.map((mealsFilterbyStage) =>\n      mealsFilterbyStage.stage.includes(stage)\n    );\n  }\n}\n","<p *ngIf=\"viewTitle\">liste des meals :</p>\n<div class=\"container_mealList\">\n  <div class=\"mealList_card\" *ngFor=\"let mealId of mealIds\">\n    <p class=\"mealId\" (click)=\"onViewMealForm(mealId)\">{{mealId}}</p>\n  </div>\n  <div class=\"container_meal\">\n    <div class=\"mealCard\" *ngFor=\"let meal of meals\">\n      <p>{{meal.typeMeal}}</p>\n    </div>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}